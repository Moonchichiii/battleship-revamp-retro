<!-- Smart Inheritance: If HTMX request, just render content. If full load, extend base. -->
{% if not request.headers.get("HX-Request") %} {% extends "base.html" %} {%
endif %} {% block content %}
<div class="dashboard-grid">
    <!-- Header Area (for Grid) -->
    <div class="site-header">
        <h2>Tactical Interface</h2>
    </div>

    <!-- Controls Area -->
    <section class="game-controls">
        <h3>System Controls</h3>

        <div class="control-group">
            <label for="board-size">Grid Resolution:</label>
            <select
                id="board-size"
                name="board-size"
                class="size-select"
                hx-post="/new"
                hx-target="#boardSection"
                hx-swap="outerHTML"
                hx-include="[name='board-size']"
            >
                <option value="6">6x6 (Mobile)</option>
                <option value="8" selected>8x8 (Standard)</option>
                <option value="10">10x10 (Classic)</option>
            </select>
        </div>

        <div class="actions">
            <button
                class="btn"
                hx-post="/new"
                hx-target="#boardSection"
                hx-include="[name='board-size']"
            >
                Initialize New Game
            </button>

            <button
                class="btn"
                hx-post="/reset"
                hx-target="#boardSection"
                hx-include="[name='board-size']"
            >
                Reset Coords
            </button>
        </div>
    </section>

    <!-- Status Area -->
    <section class="game-status">
        <h3>Mission Log</h3>
        <div id="status" class="status-log">
            {{ status_message | default("Awaiting orders. Select coordinates to
            fire.") }}
        </div>
        <div class="game-stats">
            <span>Shots: <span id="shots-count">0</span></span>
            <span>Hits: <span id="hits-count">0</span></span>
        </div>
    </section>

    <!-- Board Area -->
    <section id="boardSection" class="board-wrap">
        <!-- FIXED: Removed 'partials/' prefix -->
        {% include "_board.html" %}

        <div class="game-legend">
            <div class="legend-item">
                <span class="cell hit" style="width: 20px; height: 20px"
                    >×</span
                >
                Hit
            </div>
            <div class="legend-item">
                <span class="cell miss" style="width: 20px; height: 20px"
                    >•</span
                >
                Miss
            </div>
        </div>
    </section>
</div>
{% endblock %}
