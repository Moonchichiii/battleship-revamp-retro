{% set size = board.size if board is defined else 8 %} {% set tier = ai_tier if
ai_tier is defined else 'rookie' %}

<!-- Board Container -->
<div class="board-container" id="boardSection">
    <div class="board" style="--size: {{ size }};">
        {% for y in range(size) %} {% for x in range(size) %} {% set cell =
        board.cells[y][x] if board is defined else {'hit': False, 'miss': False}
        %}

        <button
            class="cell {% if cell.hit %}hit{% elif cell.miss %}miss{% endif %}"
            hx-post="/make-move"
            hx-vals='{"x": {{ x }}, "y": {{ y }}, "ai_tier": "{{ tier }}"}'
            hx-target="#boardSection"
            hx-swap="outerHTML"
            {%
            if
            cell.hit
            or
            cell.miss
            %}disabled{%
            endif
            %}
            aria-label="Target {{ x + 1 }}, {{ y + 1 }}"
        >
            {% if cell.hit %} × {% elif cell.miss %} • {% else %} &nbsp; {%
            endif %}
        </button>
        {% endfor %} {% endfor %}
    </div>
</div>

<!-- OOB Update 1: The Text Log -->
<div id="status" hx-swap-oob="true" class="status-log">
    > {{ status_message if status_message is defined else "System Ready. Select
    Target." }}
</div>

<!-- OOB Update 2: The Scoreboard Numbers -->
{% if game_stats is defined %}
<div id="shots-count" hx-swap-oob="innerHTML">{{ game_stats.shots_fired }}</div>
<div id="hits-count" hx-swap-oob="innerHTML">{{ game_stats.hits }}</div>
{# Optional extras if you wire them in your HTML #} {#
<div id="accuracy" hx-swap-oob="innerHTML">{{ game_stats.accuracy }}%</div>
<div id="ships-remaining" hx-swap-oob="innerHTML">
    {{ game_stats.ships_remaining }}/{{ game_stats.total_ship_cells }}
</div>
#} {% endif %}
